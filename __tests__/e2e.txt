import {
  test, expect, describe, beforeAll,
} from '@jest/globals';

describe('e2e', () => {
  beforeAll(async () => {
    await page.goto('http://localhost:8080/');
  });

  test('network Error', async () => {
    await page.waitFor(1000);
    await page.type('#url-input', 'https://www.vedomosti.ru/rss/news');
    // await page.screenshot({ path: 'screenshot1.png' });
    await page.click('[type="submit"]');
    // await page.screenshot({ path: 'screenshot2.png' });
    await page.waitFor(6000);
    // await page.screenshot({ path: 'screenshot3.png' });
    const html = await page.$eval('.feedback', (el) => el.innerHTML);
    console.log('html', html);
    expect(html).toBe('Ошибка сети');
    // await page.screenshot({ path: 'screenshot4.png' });
  }, 20000);
});
